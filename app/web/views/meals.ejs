<% layout('layout') -%>

<div class="page-header">
    <h1><i class="icon-truck"></i> All Meals <small>Order now</small></h1>
</div>

<div class="row-fluid">

    <div class="span2">

        <% if(isAdmin(session)) {  %>
        <h4>Administration</h4>

        <p class="row-fluid">
            <a href="#modal-meal-add" id="meal-modal-open" class="btn btn-success span12" data-toggle="modal">Add Meal</a>
        </p>

        <hr>

        <% } %>

        <ul class="nav nav-list well" id="sort-by">
            <li class="nav-header">sort</li>
            <li class="active">
                <a href="#sort" data-option-value="votes" data-option-asce="false"><i class="icon-bar-chart icon-white"></i> Votes</a>
            </li>
            <li><a href="#sort" data-option-value="title" data-option-asce="true"><i class="icon-filter"></i> Title</a></li>
            <li><a href="#sort" data-option-value="amount" data-option-asce="false"><i class="icon-tasks"></i> Amount</a></li>
            <li><a href="#sort" data-option-value="created" data-option-asce="false"><i class="icon-time"></i> Created</a></li>

            <li class="nav-header">Filter</li>
            <li>
                <span class="muted">Coming soon!</span>
            </li>
            <!--    
            <li class="active">
                <a href="#filter" data-option-value="votes">Votes</a>
            </li>
            <li><a href="#filter" data-option-value="title">Title</a></li>
            <li><a href="#filter" data-option-value="amount">Amount</a></li> 
            -->
        </ul>
    </div>

    <div class="span10">
        <%- partial('partials/meals', meals) %>
        <hr>
        <%- include ('partials/pagination') %>
    </div>
</div>

<!-- meal - modal -->

<div class="modal hide fade" id="modal-meal-add" tabindex="-1" role="dialog" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3><i class="icon-truck"></i> Add Meal</h3>
    </div>

    <div class="modal-body">
        
        <form class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="modal-meal-add-title">Meal Title</label>
                <div class="controls">
                    <input type="text" id="modal-meal-add-title" class="span3">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="modal-meal-add-amount">Meal Amount</label>
                <div class="controls">
                    <input type="number" id="modal-meal-add-amount" class="span3">
                </div>
            </div>
        </form>

    </div>

    <div class="modal-footer">
        <a href="javascript:;" data-dismiss="modal" class="btn">Close</a>
        <a href="#" class="btn btn-primary" id="modal-meal-add-action">Add Meal &rarr;</a>
    </div>

</div>

<!-- order - modal -->

<div class="modal hide fade" id="modal-order-add-container" tabindex="-1" role="dialog" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3><i class="icon-bullhorn"></i> Order</h3>
    </div>

    <div class="modal-body">
        
        <form class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="modal-order-add-title">Meal</label>
                <div class="controls">
                    <input type="text" id="modal-order-add-title" class="span3" disabled="disabled" value="">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="modal-order-add-time">Time</label>
                <div class="controls">
                    <select id="modal-order-add-time" class="span3">
                    <% for(var mt = 0; mt < mealtimes.length; mt++) { %>
                        <option <% if(mealtimes[mt].id == config.mealtime.default) { %>selected="selected"<% } %> value="<%= mealtimes[mt]._id %>"><%= mealtimes[mt].title %></option>
                    <% } %>
                    </select>
                </div>
            </div>
        </form>

    </div>

    <div class="modal-footer">
        <a href="javascript:;" data-dismiss="modal" class="btn">Close</a>
        <a href="#" class="btn btn-primary" id="modal-order-add-action">Send Order &rarr;</a>
    </div>

</div>